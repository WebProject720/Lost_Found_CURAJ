---
import { Image } from "astro:assets";
import Header from "../components/Header.astro";
import { Images } from "../constants.astro";
import { Loader } from "../components/utility/Loader";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link
      rel="icon"
      href="https://www.curaj.ac.in/sites/default/files/favicon.ico"
      type="image"
    />
    <meta name="generator" content={Astro.generator} />
    <title>Lost & Found - CURAJ</title>
  </head>
  <body>
    <div
      class="w-screen h-screen flex justify-center items-center"
      id="loader-container"
    >
      <Loader />
    </div>
    <div
      class="bg-gray-200 bg-red_color flex flex-col min-h-[90vh]"
      id="container"
    >
      <Header />
      <main
        class="mt-[10px] phone:mt-[10px] min-h-screen flex justify-center items-center"
      >
        <div
          class="w-full h-full flex-col phone:px-4 flex flex-wrap justify-between items-center content-center"
        >
          <div
            class="min-h-80 w-1/3 phone:w-full tablet:w-1/2 desktop:w-1/4 bg-blue-800 shadow-2xl shadow-gray-500
            phone:mb-6"
          >
            <div
              class="flex flex-col gap-2 bg-gray-100 px-16 py-12 phone:px-6 border-[0px] border-black
            rounded-tl-[70px] rounded-br-[70px]"
            >
              <div class="w-full flex content-center justify-center">
                <Image
                  src={Images.logo}
                  alt="Login Logo"
                  class="w-[120px] rounded-xl"
                />
              </div>
              <div class="">
                <slot />
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
<script>
  import { navigate } from "astro:transitions/client";
  import { UserAPI } from "../APIs/users/usersAPI";

  let loaderDiv = document.getElementById("loader-container");
  let container = document.getElementById("container");
  // container?.classList.add("hidden");
  loaderDiv?.classList.add("hidden");

  await UserAPI(null, "/isuserlogged")
    .then((res) => {
      console.log(res);
      if (res.status) {
        navigate("/dashboard");
      }
      // container?.classList.remove("hidden");
      // loaderDiv?.classList.add("hidden");
    })
    .catch((error) => {
      // container?.classList.remove("hidden");
      // loaderDiv?.classList.add("hidden");
      console.log(error);
    });
</script>
<style is:global>
  @import url("https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap");
  @import url("https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
    font-family: "Cabin", "Poppins", "monospace";
  }
</style>
